<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ —Ç–µ—Ä–º–∏–Ω–æ–≤ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏</title>
    <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º CDN –æ—Ç cdnjs.cloudflare.com –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            padding: 20px;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .description {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f1f8ff;
            border-radius: 8px;
        }
        
        .legend {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .most-probable {
            background-color: #2ecc71;
        }
        
        .selected-path {
            background-color: #3498db;
        }
        
        .clicked-path {
            background-color: #9b59b6;
        }
        
        .default-node {
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        #tree-container {
            width: 100%;
            height: 600px;
            overflow: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fefefe;
            margin-bottom: 30px;
            position: relative;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .node circle {
            stroke-width: 2.5px;
        }
        
        .node text {
            font-size: 14px;
            font-weight: 500;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
            transition: all 0.3s;
        }
        
        .node-info {
            position: fixed;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            min-width: 250px;
            max-width: 300px;
            display: none;
            border-top: 4px solid #3498db;
            z-index: 1000;
            pointer-events: none;
        }
        
        .info-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .info-probability {
            font-size: 24px;
            font-weight: 700;
            color: #e74c3c;
            margin: 10px 0;
        }
        
        .info-path {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .info-path div {
            margin-bottom: 5px;
            padding: 3px 8px;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .current-phrase {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            min-height: 60px;
        }
        
        .phrase-example {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 5px;
            font-size: 14px;
            font-weight: normal;
        }
        
        footer {
            text-align: center;
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            #tree-container {
                height: 500px;
            }
            
            .node-info {
                max-width: 250px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–î–µ—Ä–µ–≤–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏</h1>
            <div class="subtitle">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ–≤–∞ –Ω–∞ —Å–º—ã—Å–ª —Ñ—Ä–∞–∑—ã</div>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(46, 62, 80, 0.1);">
                <a href="index.html" style="color: #2c3e50; text-decoration: none; font-size: 14px; margin-right: 15px;">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                <a href="ai-modalities-for-legal-practice.html" style="color: #2c3e50; text-decoration: none; font-size: 14px; margin-right: 15px;">üéØ –ú–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ –ò–ò</a>
                <a href="prompts-for-lawyers-miniguide.html" style="color: #2c3e50; text-decoration: none; font-size: 14px;">üíº AI Legal Copilot</a>
            </div>
        </header>
        
        <div class="description">
            <p>–≠—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –≤—ã–±–æ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤ –≤ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–º—ã—Å–ª —Ñ—Ä–∞–∑—ã. –ö–∞–∂–¥—ã–π —É–∑–µ–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–ª–æ–≤–æ (—Ç–æ–∫–µ–Ω) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.</p>
            <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –ù–∞–≤–æ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —É–∑–ª—ã –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –∫–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —É–∑–ª—ã –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –≤—ã–±–æ—Ä–∞. –ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –≤—ã–¥–µ–ª–µ–Ω –∑–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä - —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º.</p>
        </div>
        
        <div class="controls">
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color most-probable"></div>
                    <span>–ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color clicked-path"></div>
                    <span>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color selected-path"></div>
                    <span>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏)</span>
                </div>
            </div>
            <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä</button>
        </div>
        
        <div class="current-phrase" id="current-phrase">
            <div id="phrase-text">–í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ—Ä–µ–≤–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—Ä–∞–∑—ã</div>
            <div class="phrase-example" id="phrase-example"></div>
        </div>
        
        <div id="tree-container"></div>
        
        <div class="node-info" id="node-info">
            <div class="info-title" id="info-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</div>
            <div id="info-description">–û–ø–∏—Å–∞–Ω–∏–µ —É–∑–ª–∞</div>
            <div class="info-probability" id="info-probability">0%</div>
            <div class="info-path">
                <div>–ü—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è:</div>
                <div id="info-path"></div>
            </div>
        </div>
        
        <footer>
            <p>–î–µ—Ä–µ–≤–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ–≤ –Ω–∞ —Å–º—ã—Å–ª —Ñ—Ä–∞–∑—ã</p>
            <p>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –∏ –æ—Ç—Ä–∞–∂–∞—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –¥–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ</p>
        </footer>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ—Ä–µ–≤–∞ - —Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã
        const treeData = {
            name: "–°—É–¥",
            probability: 100,
            description: "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ä–≥–∞–Ω, –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–∏–π –ø—Ä–∞–≤–æ—Å—É–¥–∏–µ",
            children: [
                {
                    name: "–ø–æ—Å—Ç–∞–Ω–æ–≤–∏–ª",
                    probability: 45,
                    description: "–í—ã–Ω–µ—Å —Ä–µ—à–µ–Ω–∏–µ, –ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏–µ",
                    children: [
                        {
                            name: "–≤–∑—ã—Å–∫–∞—Ç—å",
                            probability: 60,
                            description: "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∑—ã—Å–∫–∞—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞",
                            children: [
                                { name: "–¥–æ–ª–≥", probability: 40, description: "–í–∑—ã—Å–∫–∞—Ç—å —Å—É–º–º—É –¥–æ–ª–≥–∞" },
                                { name: "–Ω–µ—É—Å—Ç–æ–π–∫—É", probability: 35, description: "–í–∑—ã—Å–∫–∞—Ç—å —Å—É–º–º—É –Ω–µ—É—Å—Ç–æ–π–∫–∏" },
                                { name: "—É–±—ã—Ç–∫–∏", probability: 25, description: "–í–∑—ã—Å–∫–∞—Ç—å –ø—Ä–∏—á–∏–Ω–µ–Ω–Ω—ã–µ —É–±—ã—Ç–∫–∏" }
                            ]
                        },
                        {
                            name: "–ø—Ä–∏–∑–Ω–∞—Ç—å",
                            probability: 25,
                            description: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç",
                            children: [
                                { name: "–ø—Ä–∞–≤–æ", probability: 50, description: "–ü—Ä–∏–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏" },
                                { name: "—Å–¥–µ–ª–∫—É", probability: 30, description: "–ü—Ä–∏–∑–Ω–∞—Ç—å —Å–¥–µ–ª–∫—É –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π" },
                                { name: "—Ñ–∞–∫—Ç", probability: 20, description: "–ü—Ä–∏–∑–Ω–∞—Ç—å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç" }
                            ]
                        },
                        {
                            name: "–æ–±—è–∑–∞—Ç—å",
                            probability: 15,
                            description: "–í–æ–∑–ª–æ–∂–∏—Ç—å –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å",
                            children: [
                                { name: "—É–ø–ª–∞—Ç–∏—Ç—å", probability: 60, description: "–û–±—è–∑–∞—Ç—å —É–ø–ª–∞—Ç–∏—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞" },
                                { name: "—Å–æ–≤–µ—Ä—à–∏—Ç—å", probability: 25, description: "–û–±—è–∑–∞—Ç—å —Å–æ–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è" },
                                { name: "—É—Å—Ç—Ä–∞–Ω–∏—Ç—å", probability: 15, description: "–û–±—è–∑–∞—Ç—å —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è" }
                            ]
                        }
                    ]
                },
                {
                    name: "–æ—Ç–º–µ–Ω–∏–ª",
                    probability: 30,
                    description: "–ü—Ä–∏–∑–Ω–∞–ª –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º, –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–ª",
                    children: [
                        {
                            name: "—Ä–µ—à–µ–Ω–∏–µ",
                            probability: 70,
                            description: "–û—Ç–º–µ–Ω–∏–ª –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å—É–¥–µ–±–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ",
                            children: [
                                { name: "–Ω–∏–∂–µ—Å—Ç–æ—è—â–µ–≥–æ", probability: 60, description: "–û—Ç–º–µ–Ω–∏–ª —Ä–µ—à–µ–Ω–∏–µ –Ω–∏–∂–µ—Å—Ç–æ—è—â–µ–≥–æ —Å—É–¥–∞" },
                                { name: "–∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ", probability: 25, description: "–û—Ç–º–µ–Ω–∏–ª —Ä–µ—à–µ–Ω–∏–µ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ —Å—É–¥–∞" },
                                { name: "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ", probability: 15, description: "–û—Ç–º–µ–Ω–∏–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ" }
                            ]
                        },
                        {
                            name: "–ø—Ä–∏–∫–∞–∑",
                            probability: 20,
                            description: "–û—Ç–º–µ–Ω–∏–ª —Å—É–¥–µ–±–Ω—ã–π –ø—Ä–∏–∫–∞–∑",
                            children: [
                                { name: "–æ –≤–∑—ã—Å–∫–∞–Ω–∏–∏", probability: 80, description: "–û—Ç–º–µ–Ω–∏–ª –ø—Ä–∏–∫–∞–∑ –æ –≤–∑—ã—Å–∫–∞–Ω–∏–∏" },
                                { name: "–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π", probability: 20, description: "–û—Ç–º–µ–Ω–∏–ª –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–∫–∞–∑" }
                            ]
                        },
                        {
                            name: "–ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
                            probability: 10,
                            description: "–û—Ç–º–µ–Ω–∏–ª –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
                            children: [
                                { name: "—Å—É–¥—å–∏", probability: 70, description: "–û—Ç–º–µ–Ω–∏–ª –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–¥—å–∏" },
                                { name: "–æ—Ä–≥–∞–Ω–∞", probability: 30, description: "–û—Ç–º–µ–Ω–∏–ª –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Ä–≥–∞–Ω–∞" }
                            ]
                        }
                    ]
                },
                {
                    name: "—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª",
                    probability: 25,
                    description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ",
                    children: [
                        {
                            name: "–∏—Å–∫",
                            probability: 60,
                            description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∏—Å–∫–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è",
                            children: [
                                { name: "–ø–æ–ª–Ω–æ—Å—Ç—å—é", probability: 40, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∏—Å–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é" },
                                { name: "—á–∞—Å—Ç–∏—á–Ω–æ", probability: 35, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∏—Å–∫ —á–∞—Å—Ç–∏—á–Ω–æ" },
                                { name: "–≤—Å—Ç—Ä–µ—á–Ω—ã–π", probability: 25, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –≤—Å—Ç—Ä–µ—á–Ω—ã–π –∏—Å–∫" }
                            ]
                        },
                        {
                            name: "–∂–∞–ª–æ–±—É",
                            probability: 25,
                            description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∂–∞–ª–æ–±—É",
                            children: [
                                { name: "–∞–ø–µ–ª–ª—è—Ü–∏–æ–Ω–Ω—É—é", probability: 50, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∞–ø–µ–ª–ª—è—Ü–∏–æ–Ω–Ω—É—é –∂–∞–ª–æ–±—É" },
                                { name: "–∫–∞—Å—Å–∞—Ü–∏–æ–Ω–Ω—É—é", probability: 30, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∫–∞—Å—Å–∞—Ü–∏–æ–Ω–Ω—É—é –∂–∞–ª–æ–±—É" },
                                { name: "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é", probability: 20, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –∂–∞–ª–æ–±—É" }
                            ]
                        },
                        {
                            name: "—Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ",
                            probability: 15,
                            description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ",
                            children: [
                                { name: "–æ–± –æ—Ç–ª–æ–∂–µ–Ω–∏–∏", probability: 40, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ –æ–± –æ—Ç–ª–æ–∂–µ–Ω–∏–∏" },
                                { name: "–æ–± –∏—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–∏", probability: 35, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ –æ–± –∏—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤" },
                                { name: "–æ –≤—ã–∑–æ–≤–µ", probability: 25, description: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª —Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ –æ –≤—ã–∑–æ–≤–µ —Å–≤–∏–¥–µ—Ç–µ–ª–µ–π" }
                            ]
                        }
                    ]
                }
            ]
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let selectedNode = null;
        let hoveredNode = null;
        let mostProbablePath = null;
        let mostProbableNodeNames = [];

        // –ù–∞—Ö–æ–¥–∏–º –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –ø—É—Ç—å
        function findMostProbablePath(node, currentPath = [], currentProbability = 1) {
            currentPath.push({
                name: node.name,
                probability: node.probability,
                cumulativeProbability: currentProbability * (node.probability / 100)
            });
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –¥–µ—Ç–µ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Ç—å
            if (!node.children || node.children.length === 0) {
                return {
                    path: currentPath,
                    cumulativeProbability: currentProbability * (node.probability / 100)
                };
            }
            
            // –ù–∞—Ö–æ–¥–∏–º –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
            let mostProbableChild = node.children[0];
            for (let child of node.children) {
                if (child.probability > mostProbableChild.probability) {
                    mostProbableChild = child;
                }
            }
            
            // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
            return findMostProbablePath(
                mostProbableChild, 
                currentPath, 
                currentProbability * (node.probability / 100)
            );
        }

        // –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ —É–∑–ª—É –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ –∏–º–µ–Ω
        function getPathToNode(node) {
            const path = [];
            let currentNode = node;
            while (currentNode) {
                path.unshift(currentNode.data.name);
                currentNode = currentNode.parent;
            }
            return path;
        }

        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ñ—Ä–∞–∑—É –∏–∑ –ø—É—Ç–∏
        function buildPhraseFromPath(path) {
            if (!path || path.length === 0) return "–í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ—Ä–µ–≤–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—Ä–∞–∑—ã";
            
            let phrase = "";
            for (let i = 0; i < path.length; i++) {
                phrase += path[i];
                if (i < path.length - 1) {
                    phrase += " ";
                }
            }
            
            return phrase;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ä—è–¥–æ–º —Å –∫—É—Ä—Å–æ—Ä–æ–º
        function positionTooltip(event, tooltip) {
            const tooltipWidth = tooltip.offsetWidth;
            const tooltipHeight = tooltip.offsetHeight;
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É —Ä—è–¥–æ–º —Å –∫—É—Ä—Å–æ—Ä–æ–º
            let x = event.clientX + 15;
            let y = event.clientY + 15;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π –æ–∫–Ω–∞
            if (x + tooltipWidth > windowWidth - 20) {
                x = event.clientX - tooltipWidth - 15;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∑–∞ –Ω–∏–∂–Ω–∏–π –∫—Ä–∞–π –æ–∫–Ω–∞
            if (y + tooltipHeight > windowHeight - 20) {
                y = event.clientY - tooltipHeight - 15;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∑–∞ –ª–µ–≤—ã–π –∫—Ä–∞–π –æ–∫–Ω–∞
            if (x < 20) {
                x = 20;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∑–∞ –≤–µ—Ä—Ö–Ω–∏–π –∫—Ä–∞–π –æ–∫–Ω–∞
            if (y < 20) {
                y = 20;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
            tooltip.style.left = x + 'px';
            tooltip.style.top = y + 'px';
        }

        // –°—Ç—Ä–æ–∏–º –¥–µ—Ä–µ–≤–æ —Å –ø–æ–º–æ—â—å—é D3.js
        function buildTree() {
            const container = document.getElementById('tree-container');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            d3.select("#tree-container").html("");
            
            // –°–æ–∑–¥–∞–µ–º SVG —ç–ª–µ–º–µ–Ω—Ç
            const svg = d3.select("#tree-container")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(90, 40)"); // –£–≤–µ–ª–∏—á–∏–ª–∏ –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —É–∑–ª–∞
            
            // –°–æ–∑–¥–∞–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—é –∏–∑ –¥–∞–Ω–Ω—ã—Ö
            const root = d3.hierarchy(treeData, d => d.children);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –¥–µ—Ä–µ–≤–∞
            const treeLayout = d3.tree()
                .size([height - 100, width - 180]); // –£–≤–µ–ª–∏—á–∏–ª–∏ –æ—Ç—Å—Ç—É–ø —Å–ø—Ä–∞–≤–∞
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º layout –∫ –¥–∞–Ω–Ω—ã–º
            treeLayout(root);
            
            // –ù–∞—Ö–æ–¥–∏–º –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –ø—É—Ç—å
            mostProbablePath = findMostProbablePath(treeData);
            mostProbableNodeNames = mostProbablePath.path.map(node => node.name);
            
            // –†–∏—Å—É–µ–º –ª–∏–Ω–∏–∏ (—Ä–µ–±—Ä–∞)
            svg.selectAll(".link")
                .data(root.links())
                .enter()
                .append("path")
                .attr("class", "link")
                .attr("d", d3.linkHorizontal()
                    .x(d => d.y)
                    .y(d => d.x))
                .style("stroke-width", 2)
                .style("stroke", d => {
                    const sourceName = d.source.data.name;
                    const targetName = d.target.data.name;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—É—Ç–∏
                    if (selectedNode) {
                        const selectedPath = getPathToNode(selectedNode);
                        const sourceIndex = selectedPath.indexOf(sourceName);
                        const targetIndex = selectedPath.indexOf(targetName);
                        
                        // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—É—Ç–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                        if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                            return "#9b59b6"; // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                    if (hoveredNode) {
                        const hoveredPath = getPathToNode(hoveredNode);
                        const sourceIndex = hoveredPath.indexOf(sourceName);
                        const targetIndex = hoveredPath.indexOf(targetName);
                        
                        // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                        if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                            return "#3498db"; // –°–∏–Ω–∏–π –¥–ª—è –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏
                    const sourceIndex = mostProbableNodeNames.indexOf(sourceName);
                    const targetIndex = mostProbableNodeNames.indexOf(targetName);
                    
                    // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                    if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                        return "#2ecc71"; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –ø—É—Ç–∏
                    }
                    
                    return "#bdc3c7"; // –°–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                });
            
            // –°–æ–∑–¥–∞–µ–º —É–∑–ª—ã
            const node = svg.selectAll(".node")
                .data(root.descendants())
                .enter()
                .append("g")
                .attr("class", "node")
                .attr("transform", d => `translate(${d.y},${d.x})`)
                .on("mouseover", function(event, d) {
                    hoveredNode = d;
                    highlightPaths();
                    showNodeInfo(event, d);
                })
                .on("mousemove", function(event, d) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞
                    const tooltip = document.getElementById('node-info');
                    if (tooltip.style.display === 'block') {
                        positionTooltip(event, tooltip);
                    }
                })
                .on("mouseout", function(event, d) {
                    hoveredNode = null;
                    highlightPaths();
                    hideNodeInfo();
                })
                .on("click", function(event, d) {
                    event.stopPropagation();
                    selectedNode = d;
                    highlightPaths();
                    updatePhrase();
                });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä—É–≥–∏ –∫ —É–∑–ª–∞–º
            node.append("circle")
                .attr("r", 20)
                .style("fill", d => {
                    const nodeName = d.data.name;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É–∑–µ–ª —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
                    if (selectedNode && selectedNode.data.name === nodeName) {
                        return "#9b59b6"; // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É–∑–ª–∞
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∑–µ–ª –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                    if (hoveredNode) {
                        const hoveredPath = getPathToNode(hoveredNode);
                        if (hoveredPath.includes(nodeName)) {
                            return "#3498db"; // –°–∏–Ω–∏–π –¥–ª—è —É–∑–ª–∞ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∑–µ–ª –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏
                    if (mostProbableNodeNames.includes(nodeName)) {
                        return "#2ecc71"; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –ø—É—Ç–∏
                    }
                    
                    return "#ecf0f1"; // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                })
                .style("stroke", d => {
                    const nodeName = d.data.name;
                    
                    if (selectedNode && selectedNode.data.name === nodeName) {
                        return "#8e44ad"; // –¢–µ–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –æ–±–≤–æ–¥–∫–∞
                    }
                    
                    if (hoveredNode) {
                        const hoveredPath = getPathToNode(hoveredNode);
                        if (hoveredPath.includes(nodeName)) {
                            return "#2980b9"; // –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –æ–±–≤–æ–¥–∫–∞
                        }
                    }
                    
                    if (mostProbableNodeNames.includes(nodeName)) {
                        return "#27ae60"; // –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π –æ–±–≤–æ–¥–∫–∞
                    }
                    
                    return "#bdc3c7"; // –°–µ—Ä—ã–π –æ–±–≤–æ–¥–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                })
                .style("stroke-width", 2);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫ —É–∑–ª–∞–º (–Ω–∞–∑–≤–∞–Ω–∏–µ)
            node.append("text")
                .attr("dy", ".31em")
                .attr("x", d => d.children ? -25 : 25)
                .style("text-anchor", d => d.children ? "end" : "start")
                .style("font-size", "13px")
                .style("font-weight", "600")
                .text(d => d.data.name);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
            node.append("text")
                .attr("dy", "1.5em")
                .attr("x", 0)
                .style("text-anchor", "middle")
                .style("font-size", "11px")
                .style("fill", "#e74c3c")
                .style("font-weight", "700")
                .text(d => d.data.probability + "%");
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø—É—Ç–µ–π
            function highlightPaths() {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç–∞ —É–∑–ª–æ–≤
                d3.selectAll(".node circle")
                    .style("fill", d => {
                        const nodeName = d.data.name;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É–∑–µ–ª —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
                        if (selectedNode && selectedNode.data.name === nodeName) {
                            return "#9b59b6"; // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É–∑–ª–∞
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∑–µ–ª –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                        if (hoveredNode) {
                            const hoveredPath = getPathToNode(hoveredNode);
                            if (hoveredPath.includes(nodeName)) {
                                return "#3498db"; // –°–∏–Ω–∏–π –¥–ª—è —É–∑–ª–∞ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                            }
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —É–∑–µ–ª –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏
                        if (mostProbableNodeNames.includes(nodeName)) {
                            return "#2ecc71"; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –ø—É—Ç–∏
                        }
                        
                        return "#ecf0f1"; // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    })
                    .style("stroke", d => {
                        const nodeName = d.data.name;
                        
                        if (selectedNode && selectedNode.data.name === nodeName) {
                            return "#8e44ad"; // –¢–µ–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –æ–±–≤–æ–¥–∫–∞
                        }
                        
                        if (hoveredNode) {
                            const hoveredPath = getPathToNode(hoveredNode);
                            if (hoveredPath.includes(nodeName)) {
                                return "#2980b9"; // –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –æ–±–≤–æ–¥–∫–∞
                            }
                        }
                        
                        if (mostProbableNodeNames.includes(nodeName)) {
                            return "#27ae60"; // –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π –æ–±–≤–æ–¥–∫–∞
                        }
                        
                        return "#bdc3c7"; // –°–µ—Ä—ã–π –æ–±–≤–æ–¥–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    });
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç–∞ –ª–∏–Ω–∏–π
                d3.selectAll(".link")
                    .style("stroke", d => {
                        const sourceName = d.source.data.name;
                        const targetName = d.target.data.name;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—É—Ç–∏
                        if (selectedNode) {
                            const selectedPath = getPathToNode(selectedNode);
                            const sourceIndex = selectedPath.indexOf(sourceName);
                            const targetIndex = selectedPath.indexOf(targetName);
                            
                            // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—É—Ç–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                            if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                                return "#9b59b6"; // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
                            }
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                        if (hoveredNode) {
                            const hoveredPath = getPathToNode(hoveredNode);
                            const sourceIndex = hoveredPath.indexOf(sourceName);
                            const targetIndex = hoveredPath.indexOf(targetName);
                            
                            // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                            if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                                return "#3498db"; // –°–∏–Ω–∏–π –¥–ª—è –ø—É—Ç–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                            }
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ —Ä–µ–±—Ä–æ –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏
                        const sourceIndex = mostProbableNodeNames.indexOf(sourceName);
                        const targetIndex = mostProbableNodeNames.indexOf(targetName);
                        
                        // –ï—Å–ª–∏ –æ–±–∞ —É–∑–ª–∞ –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–º –ø—É—Ç–∏ –∏ —Å–ª–µ–¥—É—é—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
                        if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                            return "#2ecc71"; // –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ –ø—É—Ç–∏
                        }
                        
                        return "#bdc3c7"; // –°–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    })
                    .style("stroke-width", d => {
                        const sourceName = d.source.data.name;
                        const targetName = d.target.data.name;
                        
                        // –£—Ç–æ–ª—â–∞–µ–º –ª–∏–Ω–∏–∏ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—É—Ç—è—Ö
                        if (selectedNode) {
                            const selectedPath = getPathToNode(selectedNode);
                            const sourceIndex = selectedPath.indexOf(sourceName);
                            const targetIndex = selectedPath.indexOf(targetName);
                            
                            if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                                return 3;
                            }
                        }
                        
                        if (hoveredNode) {
                            const hoveredPath = getPathToNode(hoveredNode);
                            const sourceIndex = hoveredPath.indexOf(sourceName);
                            const targetIndex = hoveredPath.indexOf(targetName);
                            
                            if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                                return 3;
                            }
                        }
                        
                        const sourceIndex = mostProbableNodeNames.indexOf(sourceName);
                        const targetIndex = mostProbableNodeNames.indexOf(targetName);
                        
                        if (sourceIndex !== -1 && targetIndex !== -1 && targetIndex === sourceIndex + 1) {
                            return 3;
                        }
                        
                        return 2;
                    });
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É–∑–ª–µ
            function showNodeInfo(event, node) {
                const infoPanel = document.getElementById('node-info');
                const title = document.getElementById('info-title');
                const description = document.getElementById('info-description');
                const probability = document.getElementById('info-probability');
                const path = document.getElementById('info-path');
                
                // –ù–∞—Ö–æ–¥–∏–º –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è –¥–æ —É–∑–ª–∞
                const pathToNode = getPathToNode(node);
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                title.textContent = node.data.name;
                description.textContent = node.data.description || "–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç";
                probability.textContent = node.data.probability + "%";
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø—É—Ç—å
                let pathHTML = "";
                for (let i = 0; i < pathToNode.length; i++) {
                    pathHTML += `<div>${pathToNode[i]}</div>`;
                }
                path.innerHTML = pathHTML;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –µ–µ
                infoPanel.style.display = 'block';
                positionTooltip(event, infoPanel);
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É–∑–ª–µ
            function hideNodeInfo() {
                document.getElementById('node-info').style.display = 'none';
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã
            function updatePhrase() {
                const phraseElement = document.getElementById('phrase-text');
                const exampleElement = document.getElementById('phrase-example');
                
                if (selectedNode) {
                    const path = getPathToNode(selectedNode);
                    const phrase = buildPhraseFromPath(path);
                    phraseElement.textContent = phrase;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
                    let example = "";
                    if (path.includes("–ø–æ—Å—Ç–∞–Ω–æ–≤–∏–ª") && path.includes("–≤–∑—ã—Å–∫–∞—Ç—å")) {
                        example = "–ü—Ä–∏–º–µ—Ä: –°—É–¥ –ø–æ—Å—Ç–∞–Ω–æ–≤–∏–ª –≤–∑—ã—Å–∫–∞—Ç—å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø–æ–ª—å–∑—É –∏—Å—Ç—Ü–∞.";
                    } else if (path.includes("–ø–æ—Å—Ç–∞–Ω–æ–≤–∏–ª") && path.includes("–ø—Ä–∏–∑–Ω–∞—Ç—å")) {
                        example = "–ü—Ä–∏–º–µ—Ä: –°—É–¥ –ø–æ—Å—Ç–∞–Ω–æ–≤–∏–ª –ø—Ä–∏–∑–Ω–∞—Ç—å —Å–¥–µ–ª–∫—É –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π.";
                    } else if (path.includes("–æ—Ç–º–µ–Ω–∏–ª") && path.includes("—Ä–µ—à–µ–Ω–∏–µ")) {
                        example = "–ü—Ä–∏–º–µ—Ä: –ê–ø–µ–ª–ª—è—Ü–∏–æ–Ω–Ω—ã–π —Å—É–¥ –æ—Ç–º–µ–Ω–∏–ª —Ä–µ—à–µ–Ω–∏–µ –Ω–∏–∂–µ—Å—Ç–æ—è—â–µ–≥–æ —Å—É–¥–∞.";
                    } else if (path.includes("—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª") && path.includes("–∏—Å–∫")) {
                        example = "–ü—Ä–∏–º–µ—Ä: –°—É–¥ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏–ª –∏—Å–∫ –æ –≤–∑—ã—Å–∫–∞–Ω–∏–∏ —É–±—ã—Ç–∫–æ–≤.";
                    } else {
                        example = "–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.";
                    }
                    
                    exampleElement.textContent = example;
                } else {
                    phraseElement.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–µ—Ä–µ–≤–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—Ä–∞–∑—ã";
                    exampleElement.textContent = "";
                }
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            highlightPaths();
            updatePhrase();
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞
        document.getElementById('reset-btn').addEventListener('click', function() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä
            selectedNode = null;
            
            // –ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–µ—Ä–µ–≤–æ
            buildTree();
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–∑–ª–µ
            document.getElementById('node-info').style.display = 'none';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—Ä–∞–∑—É
            updatePhrase();
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', function() {
            buildTree();
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–æ ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                selectedNode = null;
                buildTree();
                document.getElementById('node-info').style.display = 'none';
                updatePhrase();
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            buildTree();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ—Ä–Ω–µ–≤–æ–º —É–∑–ª–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            const rootInfo = {
                data: treeData,
                parent: null
            };
            
            // –°–æ–∑–¥–∞–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            const fakeEvent = {
                clientX: window.innerWidth / 2,
                clientY: 100
            };
            
            // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, —Ç–æ–ª—å–∫–æ —Ñ—Ä–∞–∑—É
            updatePhrase();
        });
    </script>
</body>
</html>
